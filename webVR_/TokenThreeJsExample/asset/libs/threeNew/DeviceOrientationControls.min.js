THREE.DeviceOrientationControls=function(e){var o=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0,this.betaOffset=0,this.gammaOffset=0;var r,s,c,d,t=function(e){o.deviceOrientation=e},n=function(){o.screenOrientation=window.orientation||0},h=(r=new THREE.Vector3(0,0,1),s=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(e,t,n,i,a){s.set(n,t,-i,"YXZ"),e.setFromEuler(s),e.multiply(d),e.multiply(c.setFromAxisAngle(r,-a))});this.connect=function(){n(),window.addEventListener("orientationchange",n,!1),window.addEventListener("deviceorientation",t,!1),o.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",n,!1),window.removeEventListener("deviceorientation",t,!1),o.enabled=!1},this.update=function(){if(!1!==o.enabled){var e=o.deviceOrientation;if(e){var t=e.alpha?THREE.Math.degToRad(e.alpha)+o.alphaOffset:0,n=e.beta?THREE.Math.degToRad(e.beta)+o.betaOffset:0,i=e.gamma?THREE.Math.degToRad(e.gamma)+o.gammaOffset:0,a=o.screenOrientation?THREE.Math.degToRad(o.screenOrientation):0;h(o.object.quaternion,t,n,i,a)}}},this.dispose=function(){o.disconnect()},this.connect()};